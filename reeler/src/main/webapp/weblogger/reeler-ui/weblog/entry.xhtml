<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf">

    <ui:composition template="/WEB-INF/weblogger/templates/reeler-ui/reelerUiTemplate.xhtml">
        <ui:define name="title">
            <h:outputText value="Create Entry"></h:outputText>            
        </ui:define>

        <ui:define name="head">
            <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/datetimepicker/jquery.datetimepicker.css"/>
            <script type="text/javascript" src="#{request.contextPath}/js/vendor/ckeditor_4.4.7_full/ckeditor/ckeditor.js"></script>  
        </ui:define>


        <ui:define name="navigation">
            <ui:include src="navigation.xhtml">
                <ui:param name="page" value="entry"/>
            </ui:include>
        </ui:define>
        <ui:define name="content">
            <f:view>
                <h2>Create Entry for #{weblogEntryAuthorBean.weblog.name}</h2>
                <div id="weblogEntryDiv">
                    <h:form id="weblogEntryForm" class="form" prependId="false">   

                        <h:panelGroup id="messagePanel" layout="block">
                            <h:messages 
                                errorStyle="color: red" 
                                infoStyle="color: green" 
                                layout="table"/>
                        </h:panelGroup>


                        <div class="form-group">
                            <div>
                                <label jsf:for="title" 
                                       class="control-label #{title.isValid ? '':'has-error'}">#{messages.WeblogEntry_title}</label>
                                <input jsf:id="title"
                                       value="#{weblogEntryAuthorBean.weblogEntry.title}"
                                       class="form-control"
                                       type="text"
                                       /> 
                                <h:message for="weblogEntryForm:title" style="color: red"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <label jsf:for="status" class="control-label">#{messages.WeblogEntry_status}</label>
                                <input jsf:id="status"  
                                       value="#{weblogEntryAuthorBean.weblogEntry.status}"                                       
                                       type="text"
                                       class="form-control"
                                       disabled="true"/>
                                <h:message for="weblogEntryForm:status" style="color: red"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <label for="weblogEntryCategory" class="control-label#{weblogEntryCategory.isValid ? '':'has-error'}">#{messages.WeblogEntry_category}</label>
                                <div id="">
                                    <select
                                        id="weblogEntryCategory"
                                        name="weblogEntryCategory"
                                        jsfc="h:selectOneMenu"
                                        title="Category" 
                                        class="form-control" 
                                        value="#{weblogEntryAuthorBean.weblogEntry.category}"
                                        required="true"
                                        converter="#{weblogCategoryConverter}"
                                        >
                                        <option jsfc="f:selectItems" 
                                                value="#{weblogEntryAuthorBean.weblog.weblogCategories}" 
                                                var="category" 
                                                itemValue="#{category}"
                                                itemLabel="#{category.name}" />

                                    </select>
                                    <h:message for="weblogEntryForm:weblogEntryCategory" style="color: red"/>
                                </div>  
                            </div>                            
                        </div>


                        <div class="form-group">
                            <div>
                                <label jsf:for="tags" 
                                       class="control-label #{tags.isValid ? '':'has-error'}">#{messages.WeblogEntry_tags}</label>
                                <input jsf:id="tags"
                                       value="#{weblogEntryAuthorBean.tagString}"
                                       class="form-control"
                                       type="text"
                                       /> 
                                <h:message for="weblogEntryForm:tags" style="color: red"/>
                            </div>
                        </div>



                        <div class="form-group">
                            <div>
                                <label jsf:for="text" class="control-label">Content</label>
                                <h:message for="weblogEntryForm:text" style="color: red"/>
                                <textarea                        
                                    jsf:id="text"
                                    value="#{weblogEntryAuthorBean.weblogEntry.text}" 
                                    class="ckeditor">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label jsf:for="strDateTimeOfPubDate" class="control-label">Pub Time</label>
                            <div class="row">
                                <div class="col-lg-6">
                                    <input jsfc="h:inputText"
                                           id="strDateTimeOfPubDate"
                                           type="text" 
                                           value="#{weblogEntryAuthorBean.strDateTimeOfPubDate}"
                                           class="form-control"
                                           autocomplete="off"
                                           ></input>                                
                                </div>
                                <div class="col-lg-6">
                                    #{reelerUiBean.user.timeZone}                                
                                </div>
                            </div>

                        </div>


                        <div class="form-group">
                            <div>
                                <div class="checkbox-inline">
                                    <h:selectBooleanCheckbox id="allowComments"/>
                                    <label jsf:for="allowComments">Allow Comments for</label>
                                    &nbsp;
                                    <h:selectOneMenu 
                                        id="commentDays"
                                        value="#{weblogEntryAuthorBean.weblogEntry.commentDays}">
                                        <f:selectItems value="#{selectItemBean.commentDaysItems}"/>                                    
                                    </h:selectOneMenu>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <div class="checkbox-inline">
                                    <h:selectBooleanCheckbox id="rightToLeft" value="#{weblogEntryAuthorBean.weblogEntry.rightToLeft}"/>
                                    <label jsf:for="rightToLeft">Text reads right to left</label>

                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <div class="checkbox-inline">
                                    <h:selectBooleanCheckbox 
                                        id="pinnedToMain" 
                                        value="#{weblogEntryAuthorBean.weblogEntry.pinnedToMain}"/>
                                    <label jsf:for="rightToLeft">Pinned to main</label>

                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <label jsf:for="searchDescription" 
                                       class="control-label #{searchDescription.isValid ? '':'has-error'}">Search Description</label>
                                <input jsf:id="searchDescription"
                                       binding="#{searchDescription}"
                                       value="#{weblogEntryAuthorBean.weblogEntry.searchDescription}"
                                       class="form-control"
                                       type="text"
                                       /> 
                                <h:message for="weblogEntryForm:searchDescription" style="color: red"/>
                            </div>
                        </div>


                        <div class="form-group">
                            <div>
                                <label jsf:for="enclosureURL" 
                                       class="control-label #{enclosureURL.isValid ? '':'has-error'}">Enclosure URL</label>
                                <input jsf:id="enclosureURL"
                                       value="#{weblogEntryAuthorBean.enclosureURL}"
                                       class="form-control"
                                       type="text"
                                       /> 
                                <h:message for="weblogEntryForm:enclosureURL" style="color: red"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div>
                                <h:commandButton id="submitDraft" 
                                                 value="Save as Draft"
                                                 action="#{weblogEntryAuthorBean.saveAsDraft}"
                                                 styleClass="btn btn-info">

                                </h:commandButton>
                                <h:commandButton id="submitPost" 
                                                 value="Post to Weblog"
                                                 action="#{weblogEntryAuthorBean.postToWeblog}"
                                                 styleClass="btn btn-info">

                                </h:commandButton>
                            </div>
                        </div>
                    </h:form>
                </div>
            </f:view>

        </ui:define>

        <ui:define name="postBody">
            <script src="#{request.contextPath}/js/vendor/moment.min.js"></script>
            <script src="#{request.contextPath}/js/datetimepicker/jquery.datetimepicker.js"></script>
            <script>
                Date.parseDate = function (input, format) {
                    return moment(input, format).toDate();
                };
                Date.prototype.dateFormat = function (format) {
                    return moment(this).format(format);
                };
                //$(document).ready(function () {
                //$('#dateTimeOfEvent').datetimepicker();
                //}
                $('#strDateTimeOfPubDate').datetimepicker({
                    format: 'YYYY/MM/DD HH:mm:ss',
                    formatTime: 'HH:mm:ss',
                    formatDate: 'YYYY/MM/DD'
                });
            </script>           
        </ui:define>
    </ui:composition>

</html>


